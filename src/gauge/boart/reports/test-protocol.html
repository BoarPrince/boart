<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
            crossorigin="anonymous"
        />
        <style type="text/css">
            body {
                background-color: black;
            }
            summary {
                font-size: small;
            }
            main table {
                width: 100%;
            }
            td {
                vertical-align: middle;
            }
            dd {
                font-size: smaller;
            }
            dd small {
                font-size: smaller;
            }
            dd small pre {
                font-size: smaller;
                font-family: 'Courier New', Courier, monospace;
            }
            dd span.duration {
                position: absolute;
                right: 1em;
                font-size: x-small;
            }
            div[data-bs-toggle] {
                height: 3em;
                padding-top: 1em;
                padding-bottom: 1em;
                margin-top: -1em;
                transition: margin-bottom 1s;
                margin-bottom: -1em;
            }
            div.detail-description {
                margin-top: 1em;
                margin-bottom: 1em;
                font-size: smaller;
                font-weight: lighter;
                font-style: italic;
            }
            #protocol_table tbody tr.failed:hover,
            #protocol_table tbody tr.passed:hover,
            div[data-bs-toggle]:hover {
                opacity: 0.6;
                font-style: italic;
                cursor: pointer;
            }
            td.status,
            div.statistic .badge {
                cursor: pointer;
            }
            td.details-control i {
                font-size: xx-large;
            }
            tr:not(.shown) td.details-control .closed,
            tr.shown td.details-control .opened {
                display: initial;
            }
            tr:not(.shown) td.details-control .opened,
            tr.shown td.details-control .closed {
                display: none;
            }
            tr.group td {
                padding: 20px 10px;
                font-size: xx-large;
            }
            li.group-step li {
                margin-right: 0;
                filter: brightness(90%);
            }
            li.group-step,
            li.step {
                padding: 1rem 0.5rem;
                margin-left: 2rem;
                margin-right: 1rem;
            }
            .step-header.group:not(.collapsed) {
                margin-bottom: 0;
            }
            .step-header i {
                position: absolute;
                left: -2rem;
                font-size: large;
            }
            .step-header.group i {
                font-weight: bold;
            }
            .output-code,
            .input-code {
                position: relative;
            }
            .code-copy-icon {
                position: absolute;
                top: 0.5rem;
                right: 2rem;
                font-size: x-large;
                color: lightgray;
            }
            .code-copy-icon:hover:active {
                color: green;
            }
            .code-copy-icon:hover {
                color: gray;
                height: 0;
            }
            .card-text pre {
                overflow-x: auto;
                max-height: 25em;
            }
            ul .card:not(:first-child) {
                margin-top: 0.5em;
            }
            ul .card:first-child {
                margin-top: 1em;
            }
            img.screenshot {
                width: 15em;
                cursor: pointer;
            }
        </style>
        <title>Test Report</title>
    </head>
    <body>
        <div class="container-fluid">
            <header>
                <div class="h1 alert alert-dark" role="alert">Test Protocol (<span class="project-description"></span>)</div>
            </header>
            <summary class="alert alert-dark statistic" role="alert">
                <div class="row p-2 pt-4 pb-4 border-bottom border-dark border-4 fw-bold">
                    <div class="col-2">Time</div>
                    <div class="col-10 start-time"></div>
                    <div class="col-2">Total Duration</div>
                    <div class="col-10"><span class="complete-duration"></span> min</div>
                </div>
                <div class="row high p-2 border-bottom border-dark border-4">
                    <div class="col-2 fw-bold">High</div>
                    <div class="col-2">
                        <div class="row-1">
                            <div class="col-12 passed">
                                <span class="badge bg-success">Succeed</span>
                                <small class="count"></small>
                            </div>
                            <div class="col-12 failed">
                                <span class="badge bg-danger">Failed</span>
                                <small class="count"></small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row medium p-2 border-bottom border-dark border-4">
                    <div class="col-2 fw-bold">Medium</div>
                    <div class="col-2">
                        <div class="row-1">
                            <div class="col-12 passed">
                                <span class="badge bg-success">Succeed</span>
                                <small class="count"></small>
                            </div>
                            <div class="col-12 failed">
                                <span class="badge bg-danger">Failed</span>
                                <small class="count"></small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row low p-2">
                    <div class="col-2 fw-bold">Low</div>
                    <div class="col-2">
                        <div class="row-1">
                            <div class="col-12 passed">
                                <span class="badge bg-success">Succeed</span>
                                <small class="count"></small>
                            </div>
                            <div class="col-12 failed">
                                <span class="badge bg-danger">Failed</span>
                                <small class="count"></small>
                            </div>
                        </div>
                    </div>
                </div>
            </summary>
            <main>
                <table id="protocol_table" class="table table-dark table-striped" aria-describedby="result table">
                    <thead>
                        <tr>
                            <td></td>
                            <th scope="col">Test Group</th>
                            <th scope="col">Test</th>
                            <th scope="col">Status</th>
                            <th scope="col">Ticket</th>
                            <th scope="col">Priority</th>
                            <th scope="col">Duration</th>
                        </tr>
                    </thead>
                </table>
            </main>
        </div>
        <!-- ##################################################### -->
        <!-- Reference external libraries -->
        <!-- ##################################################### -->
        <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
            crossorigin="anonymous"
        ></script>
        <!-- ##################################################### -->
        <!-- Render Table -->
        <!-- ##################################################### -->
        <script>
            const groupColumn = 1;
            $(document).ready(function () {
                const table = $('#protocol_table').DataTable({
                    paging: false,
                    searching: false,
                    ordering: false,
                    info: false,
                    autoWidht: true,
                    columns: [
                        {
                            data: '',
                            className: 'details-control',
                            orderable: false,
                            render: (data, type, row, meta) => {
                                const textClass = row.status == 'failed' ? 'text-danger' : 'text-success';
                                return `<button type="button" class="btn btn-outline-secondary border-0"><i class="${textClass} closed bi bi-plus-circle-fill"></i><i class="${textClass} opened bi bi-dash-circle-fill"></i></button>`;
                            }
                        },
                        { data: 'topic' },
                        { data: 'name' },
                        {
                            data: 'status',
                            className: 'status',
                            render: (data, type, row, meta) =>
                                data == 'failed'
                                    ? `<span class="badge bg-danger">${data}</span>`
                                    : `<span class="badge bg-success">${data}</span>`
                        },
                        { data: 'ticket' },
                        { data: 'priority' },
                        {
                            data: 'duration',
                            render: (data, type, row, meta) => `<small>${formatDuration(data)} s</small>`
                        }
                    ],
                    createdRow: function (row, data, dataIndex, cells) {
                        $(row).addClass(data.status);
                        $(row).addClass(`local-${data.localId}`);
                    },
                    order: [[0, 'asc']],
                    columnDefs: [{ visible: false, targets: groupColumn }],
                    drawCallback: function (settings) {
                        var api = this.api();
                        var rows = api.rows({ page: 'current' }).nodes();
                        var last = null;
                        var data = api.data();

                        api.column(groupColumn, { page: 'current' })
                            .data()
                            .each((group, i) => {
                                if (last !== group) {
                                    $(rows)
                                        .eq(i)
                                        .before(`<tr local-id="${data[i].localId}" class="group"><td colspan="7">${group}</td></tr>`);

                                    last = group;
                                }
                            });
                    },
                    data: document.data.overview
                });

                // #####################################################
                // Add event listener for opening and closing details
                // #####################################################
                $('#protocol_table tbody').on('click', 'tr', function () {
                    const tr = $(this);
                    const data = table.data();
                    const row = table.row(tr);
                    if (row.child.isShown()) {
                        // This row is already open - close it
                        row.child.hide();
                        tr.removeClass('shown');
                    } else {
                        const data = row.data();
                        if (!data) {
                            const localId = tr.attr('local-id');
                            const rows = $(`.local-${localId}`);
                            if (tr.hasClass('hide')) {
                                rows.show();
                                tr.removeClass('hide');
                            } else {
                                rows.hide();
                                tr.addClass('hide');
                            }
                            return;
                        }
                        const scenario = document.data.tests[data.testId];
                        document.scenarioDatailPostActions = [];
                        const childContent = document.formTestDetail(scenario);
                        row.child(childContent).show();
                        document.scenarioDatailPostActions.forEach((action) => action());
                        tr.addClass('shown');
                    }
                });

                // #####################################################
                // Filters
                // #####################################################
                const filterTableByPrioAndStatus = (priority, status) => {
                    table.clear().draw();
                    const failedTests = document.data.overview.filter((test) => test.status == status && test.priority == priority);
                    failedTests.forEach((test) => table.row.add(test).draw(false));
                };

                globalThis.filterTableByTag = (tag) => {
                    table.clear().draw();
                    const failedTests = document.data.overview.filter((test) => test.tags?.includes(tag));
                    failedTests.forEach((test) => table.row.add(test).draw(false));
                    return false;
                };

                $('.project-description').text(`${document.data.projectName}, ${document.data.environment}`);

                // #####################################################
                // Add Statistic
                // #####################################################
                const statistic = document.data.statistic;
                $('.statistic .high .passed .count').text(`(${statistic.high.succeed})`);
                $('.statistic .high .failed .count').text(`(${statistic.high.failed})`);
                $('.statistic .medium .passed .count').text(`(${statistic.medium.succeed})`);
                $('.statistic .medium .failed .count').text(`(${statistic.medium.failed})`);
                $('.statistic .low .passed .count').text(`(${statistic.low.succeed})`);
                $('.statistic .low .failed .count').text(`(${statistic.low.failed})`);

                $('div.statistic').on('click', '.high .passed', () => filterTableByPrioAndStatus('high', 'passed'));
                $('div.statistic').on('click', '.high .failed', () => filterTableByPrioAndStatus('high', 'failed'));
                $('div.statistic').on('click', '.medium .passed', () => filterTableByPrioAndStatus('medium', 'passed'));
                $('div.statistic').on('click', '.medium .failed', () => filterTableByPrioAndStatus('medium', 'failed'));
                $('div.statistic').on('click', '.low .passed', () => filterTableByPrioAndStatus('low', 'passed'));
                $('div.statistic').on('click', '.low .failed', () => filterTableByPrioAndStatus('low', 'failed'));

                $('.start-time').text(formatDate(document.data.startTime));
                $('.complete-duration').text(formatDuration(document.data.durationMin));
            });
        </script>

        <script>
            // #####################################################
            // Copy code to clipboard
            // #####################################################
            function copyCodeToClipboard(self, code) {
                //self.style.color = 'red';
                if (!navigator.clipboard) {
                    return;
                }
                navigator.clipboard.writeText(code);
            }
            // #####################################################
            // Helpers
            // #####################################################
            const stringifyIfObject = (data) => {
                if (typeof data === 'object') {
                    return JSON.stringify(data, null, ' ');
                }
                return data;
            };

            const formatDuration = (duration) => {
                return new Intl.NumberFormat({ maximumSignificantDigits: 2 }).format(duration);
            };

            const formatDate = (dateISO) => {
                const date = new Date(dateISO);
                return new Intl.DateTimeFormat('default', { dateStyle: 'full', timeStyle: 'long' }).format(date);
            };

            // #####################################################
            // Step Details
            // #####################################################
            const addStepDetails = (step) => {
                const stepDetail = [];

                // detail description
                if (step.detailDescription?.length > 0) {
                    stepDetail.push('<div class="detail-description">');
                    step.detailDescription.forEach((detail) => {
                        stepDetail.push(`<div>${detail}</div>`);
                    });
                    stepDetail.push('</div>');
                }

                // screenshots
                if (!!step.screenshots && step.screenshots.length > 0) {
                    stepDetail.push(`<div class="card">
                        <p class="card-header">Screenshots</p>
                        <div class="card-body input-code">`);

                    step.screenshots.forEach((screenshot) => {
                        stepDetail.push(`<img class="screenshot" id="img-${screenshot}" loading="lazy"></img>`);
                        document.scenarioDatailPostActions.push(() => {
                            const image = $(`#img-${screenshot}`);
                            image
                                .on('load', function () {
                                    this.src = document.data.screenshots[screenshot];
                                    image.unbind('load');
                                })
                                .on('click', function () {
                                    let pdfWindow = window.open('');
                                    pdfWindow.document.write(
                                        "<img width='100%' height='100%' src='" + document.data.screenshots[screenshot] + "'></img>"
                                    );
                                })
                                .each(function () {
                                    $(this).trigger('load');
                                });
                            $(`#img-${screenshot}`).removeAttr('id');
                        });
                    });
                    stepDetail.push(`</div></div>`);
                }

                // Input
                step.input.forEach((stepInput) => {
                    const code = stringifyIfObject(stepInput.data) || '-';
                    stepDetail.push(`<div class="card">
                                        <p class="card-header">${stepInput.desc}</p>
                                        <div class="card-body input-code">
                                            <div class="card-text">
                                                <i id="ic-${stepInput.id}" class="code-copy-icon bi bi-file-earmark-text-fill"></i>
                                                <small><pre>${code}</pre></small></div>
                                        </div>
                                     </div>`);
                    document.scenarioDatailPostActions.push(() => {
                        $(`#ic-${stepInput.id}`).on('click', function () {
                            copyCodeToClipboard(this, code);
                        });
                        $(`#ic-${stepInput.id}`).removeAttr('id');
                    });
                });

                // Output
                step.output
                    .filter((stepOutput) => !!stepOutput.desc)
                    .forEach((stepOutput) => {
                        const code = stringifyIfObject(stepOutput.data);
                        stepDetail.push(`<div class="card">
                            <p class="card-header">${stepOutput.desc}</p>
                                <div class="card-body output-code">
                                    <div class="card-text">
                                        <i id="oc-${stepOutput.id}" class="code-copy-icon bi bi-file-earmark-text-fill"></i>
                                        <small><pre>${code}</pre></small></div>
                                </div>
                            </div>`);
                        document.scenarioDatailPostActions.push(() => {
                            $(`#oc-${stepOutput.id}`).on('click', function () {
                                copyCodeToClipboard(this, code);
                            });
                            $(`#oc-${stepOutput.id}`).removeAttr('id');
                        });
                    });

                // Error Message
                if (!!step.errorMessage) {
                    stepDetail.push(`<div class="card">
                                        <p class="card-header">Error Message</p>
                                        <div class="card-body">
                                            <div class="card-text"><small>${stringifyIfObject(step.errorMessage)}</small></div>
                                        </div>
                                      </div>`);
                }
                return stepDetail.join('\n');
            };

            // #####################################################
            // Step List
            // #####################################################
            const addSteps = (steps) => {
                const statusIcon = (status) => {
                    switch (status) {
                        case 'failed':
                            return '<i class="text-danger bi-exclamation-circle-fill"></i>';
                        case 'succeed':
                            return '<i class="text-success bi bi-check-lg"></i>';
                        default:
                            return '<i class="text-secondary bi-exclamation-circle-fill"></i>';
                    }
                };

                const stepDescItems = [];
                stepDescItems.push('<ul class="list-group">');
                steps.forEach((step) => {
                    if (step.type === 'group') {
                        stepDescItems.push(`<li class="list-group-item list-group-item-dark group-step">`);
                        stepDescItems.push(`<div class="step-header group collapsed" data-bs-toggle="collapse" href="#detail-${step.id}">`);
                        stepDescItems.push(statusIcon(step.status));

                        stepDescItems.push(`${step.description}`);
                        stepDescItems.push(`<span class="duration">${formatDuration(step.duration)} s</span>`);
                        stepDescItems.push(`</div>`);

                        stepDescItems.push(`<div class="collapse" id="detail-${step.id}">`);
                        stepDescItems.push('<ul class="list-group">');
                        stepDescItems.push(addSteps(step.steps));
                        stepDescItems.push('</ul>');
                        stepDescItems.push('</div>');

                        stepDescItems.push('</li>');
                    } else {
                        stepDescItems.push(`<li class="list-group-item list-group-item-dark step">`);
                        stepDescItems.push(`<div class="step-header" data-bs-toggle="collapse" href="#detail-${step.id}">`);

                        stepDescItems.push(statusIcon(step.status));
                        stepDescItems.push(`${step.description}`);
                        stepDescItems.push(`<span class="duration">${formatDuration(step.duration)} s</span>`);
                        stepDescItems.push('</div>');

                        stepDescItems.push(`<div class="collapse" id="detail-${step.id}">`);
                        stepDescItems.push(addStepDetails(step));
                        stepDescItems.push(`</div>`);
                    }

                    stepDescItems.push('</li>');
                });
                stepDescItems.push('</ul>');
                return stepDescItems.join('\n');
            };
            const conditinallyAdd = (text_or_delegate, condition) => {
                return condition ? (typeof text_or_delegate === 'string' ? text_or_delegate : text_or_delegate()) : '';
            };

            // #####################################################
            // Test Detail
            // #####################################################
            document.formTestDetail = (test) => {
                return (
                    '<div class="container">' +
                    // Execution Time
                    '<dl class="row">' +
                    ' <dt class="col-2">Time</dt>' +
                    `  <dd class="col-10">${formatDate(test.startTime)}</dd>` +
                    '</dl>' +
                    // Duration
                    '<dl class="row">' +
                    ' <dt class="col-2">Duration</dt>' +
                    `  <dd class="col-10">${formatDuration(test.duration)} s</dd>` +
                    '</dl>' +
                    conditinallyAdd(
                        // Tickets
                        '<dl class="row">' +
                            ' <dt class="col-2">Tickets</dt>' +
                            `  <dd class="col-10">${test.tickets
                                .map((t) => '<a href="' + t.link + '" target="_">' + t.id + '@' + t.source + '</a>')
                                .join(', ')}</dd>` +
                            '</dl>',
                        !!test.tickets && test.tickets.length > 0
                    ) +
                    conditinallyAdd(
                        // Tags
                        '<dl class="row">' +
                            ' <dt class="col-2">Tags</dt>' +
                            `  <dd class="col-10">${test.tags
                                .map((t) => `<a href="#" onclick="filterTableByTag('${t}');">${t}</a>`)
                                .join(', ')}</dd>` +
                            '</dl>',
                        !!test.tags && test.tags.length > 0
                    ) +
                    conditinallyAdd(
                        // Description
                        '<dl class="row">' +
                            ' <dt class="col-2">Description</dt>' +
                            `  <dd class="col-10">${test.descriptions.replace('\n', '<br>')}</dd>` +
                            '</dl>',
                        !!test.descriptions
                    ) +
                    conditinallyAdd(
                        () =>
                            // stepDescription
                            '<dl class="row">' +
                            ' <dt class="col-2">Steps</dt>' +
                            `  <dd class="col-10">${addSteps(test.steps)}</dd>` +
                            '</dl>',
                        !!test.steps && test.steps.length > 0
                    ) +
                    conditinallyAdd(
                        // Failure Description
                        '<dl class="row">' +
                            ' <dt class="col-2">Failure</dt>' +
                            `  <dd class="col-10"><pre>${test.errorMessage}</pre></dd>` +
                            '</dl>',
                        test.status == 'failed' && !!test.errorMessage
                    ) +
                    conditinallyAdd(
                        // screenshot
                        '<dl class="row">' +
                            ' <dt class="col-2">Screenshot</dt>' +
                            `  <dd class="col-10"><img width="100%" src="${test.screenshot}" alt="Red dot" /></dd>` +
                            '</dl>',
                        !!test.screenshot
                    ) +
                    '</div>'
                );
            };
        </script>
        <!-- ##################################################### -->
        <!-- Document Data -->
        <!-- ##################################################### -->
        <script>
            document.data = {"statistic":{"high":{"succeed":0,"failed":1},"medium":{"succeed":0,"failed":0},"low":{"succeed":0,"failed":0}},"overview":[{"topic":"10. Onboarding Fleet","name":"10.2. Send Onboarding Events manually and check id's","ticket":"","tags":["env-all","ob-10","ob-10.2","onboarding"],"status":"failed","priority":"high","duration":28.39,"startTime":"2022-10-28T12:28:52.471Z","localId":"fc6ac4d9-d35a-4877-9d4b-d5220be140f7","testId":"b723197f-d300-4b8f-af89-bf88560d0764"}],"locals":{"fc6ac4d9-d35a-4877-9d4b-d5220be140f7":{"id":"fc6ac4d9-d35a-4877-9d4b-d5220be140f7","tags":["env-all","onboarding","ob-10"],"duration":28.41,"status":"failed","name":"Onboarding Fleet","number":"10"}},"tests":{"b723197f-d300-4b8f-af89-bf88560d0764":{"id":"b723197f-d300-4b8f-af89-bf88560d0764","tags":["env-all","ob-10","ob-10.2","onboarding"],"name":"10.2. Send Onboarding Events manually and check id's","status":"failed","duration":28.39,"startTime":"2022-10-28T12:28:52.471Z","priority":"high","descriptions":"Send Onboarding Event to Masterdata manually and check id's","tickets":[],"steps":[{"id":"9bdaadee-2ae0-416e-bc1d-bf5e8b199abe","type":"group","status":"succeed","duration":3.59,"description":"10.2.1. Bind Queues","group":"Bind Queues","startTime":null,"steps":[{"id":"52df828a-ad48-4fcd-9bd4-56ef3d390689","status":"succeed","errorMessage":"","duration":0.24,"startTime":"2022-10-28T12:28:52.490Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.1 Bind Masterdata (Company) -> External","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.md.company","exchange":"company","routing":[],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"e2ecd30a-d036-4ae5-9f1e-72b995c6e317","status":"succeed","errorMessage":"","duration":0.35,"startTime":"2022-10-28T12:28:52.736Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.2 Bind Onboarding -> Extern (Masterdata, Portal)","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.ob.company","exchange":"com.jitpay.company.onboarding","routing":["company-onboarding-data-sync-to-portal","JitpayServicesSync.RoutingKey","company-onboarding-data-sync-to-obs"],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"e33c40ee-4618-4218-8474-7dc33189d5d1","status":"succeed","errorMessage":"","duration":0.24,"startTime":"2022-10-28T12:28:53.089Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.3 Bind Masterdata (Carrier) -> External","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.md.carrier","exchange":"carrier","routing":[],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"78b2afa8-bdb5-48a5-8a90-27e1a2b6ba57","status":"succeed","errorMessage":"","duration":0.25,"startTime":"2022-10-28T12:28:53.329Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.4 Bind user queue","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.md.user","exchange":"user","routing":[],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"bf8eb6dd-0fad-440e-8793-4408506527c2","status":"succeed","errorMessage":"","duration":0.23,"startTime":"2022-10-28T12:28:53.583Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.5 Portal is producer for Onboarding","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.md.fleet_event_bus","exchange":"fleet_event_bus","routing":["OnBoardingFleetEvent"],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"703f4f3c-e7cf-4fec-a8ef-e57fe73ac046","status":"succeed","errorMessage":"","duration":0.22,"startTime":"2022-10-28T12:28:53.813Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.6 Bind identity/keycloak queue (Masterdata)","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.md.identity","exchange":"Identity.Exchange.MasterData","routing":["Identity.UserSync"],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"b7edb5b2-2699-40ee-8850-55399b3dc303","status":"succeed","errorMessage":"","duration":0.27,"startTime":"2022-10-28T12:28:54.037Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.7 Bind identity/keycloak queue","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.md.identity","exchange":"Identity.Exchange","routing":["Identity.UserSync","Identity.Role.Add"],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"100eef70-ee72-434e-a61b-e14eabf960e4","status":"succeed","errorMessage":"","duration":0.33,"startTime":"2022-10-28T12:28:54.307Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.8 Bind all fleet error queues","detailDescription":["to check if an error has occured"],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.fleet.masterdata.error","exchange":"fleet.masterdata.error.exchange","routing":["fleet.masterdata.company.error","fleet.masterdata.carrier.error","fleet.masterdata.user.error"],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"b694c27b-dd02-4926-80a5-d9f4ecec2319","status":"succeed","errorMessage":"","duration":1.23,"startTime":"2022-10-28T12:28:54.639Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.9 Bind portal->masterdata error queues to check if an error has occured","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.portal.masterdata.error","exchange":"masterdata.exchange.deadletter","routing":["masterdata/portal"],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]},{"id":"24a50f1b-0428-469f-884f-51caed0c0b8b","status":"succeed","errorMessage":"","duration":0.23,"startTime":"2022-10-28T12:28:55.870Z","type":"rabbitBind","group":"Bind Queues","description":"10.2.1.10 Bind onboarding->masterdata error queues to check if an error has occured","detailDescription":[],"steps":null,"input":[],"output":[{"id":"-","desc":"Rabbit bind (config)","data":{"queue":"test.onboarding.masterdata.error","exchange":"masterdata.exchange.deadletter","routing":["masterdata/onboarding"],"queue_create":true,"queue_delete":true,"username":"jitpay","password":"JITpaySYS#19","hostname":"192.168.50.250","port":5672,"vhost":"/"}}]}],"errorMessage":null,"detailDescription":null,"input":null,"output":null},{"id":"eafc96bb-fa76-4090-b5c9-79b2d5146cb5","status":"succeed","errorMessage":"","duration":4.16,"startTime":"2022-10-28T12:28:56.105Z","type":"rabbitPublish","description":"10.2.2. Send event to identity to create the user on keycload","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit publish (configuration)","data":{"queue_or_exhange":"Identity.Exchange","type":"exchange","username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}},{"id":"-","desc":"Rabbit publish (header)","data":{"header":{},"correlationId":"","messageId":"","routing":["Identity.UserSync"]}},{"id":"-","desc":"Rabbit publish to exchange (payload)","data":{"CorrelationId":null,"CompanyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","username":"jitpaytest+ob9528@gmail.com","email":"jitpaytest+ob9528@gmail.com","password":"Germany2022!","CompanyName":"Murray, Ullrich and Gorczany-9917","PhoneNumber":491743284130,"Locale":"de","FirstName":"Alivia","LastName":"Yundt","EntityType":null,"Roles":"","UserId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","CustomerId":null,"activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","SubsidiaryId":"77db5b27-6d85-40e7-9ae6-936aefde727f","LegitimationStatus":1,"PasswordHint":"Germany2022!","DriverId":null}}],"output":[]},{"id":"2edcefc9-f638-4c68-bd56-656b1a83e52a","status":"succeed","errorMessage":"","duration":2.16,"startTime":"2022-10-28T12:29:00.271Z","type":"rabbitPublish","description":"10.2.3. Send onboarding event manually","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit publish (configuration)","data":{"queue_or_exhange":"com.jitpay.company.onboarding","type":"exchange","username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}},{"id":"-","desc":"Rabbit publish (header)","data":{"header":{},"correlationId":"","messageId":"","routing":["JitpayServicesSync.RoutingKey"]}},{"id":"-","desc":"Rabbit publish to exchange (payload)","data":{"companyDto":{"id":"c67161a6-d552-45ce-834e-53aa9053ae7f","name":"Murray, Ullrich and Gorczany-9917","state":"CREATED","referer":"LANDING_PAGE","target":"JITPAY","legalForm":"GmbH_de","vatId":null,"truckAmount":0,"taxId":98173124},"addressDto":{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","street":"Bradly Walk","zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","countryCode":"DE","timocomId":null},"contactDto":{"id":"50cc7340-c0e7-451c-8025-133ebb17ff3e","firstName":"Alivia","lastName":"Yundt","email":"jitpaytest+ob9528@gmail.com","telephoneNumber":{"country":49,"number":1743284130},"companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f"},"userDetail":{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","email":"jitpaytest+ob9528@gmail.com","languageCode":"en"}}}],"output":[]},{"id":"96301f97-584f-4108-b1c2-332bee64e539","status":"succeed","errorMessage":"","duration":4.16,"startTime":"2022-10-28T12:29:02.435Z","type":"rabbitPublish","description":"10.2.4. Send portal onboarding event manually","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit publish (configuration)","data":{"queue_or_exhange":"fleet_event_bus","type":"exchange","username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}},{"id":"-","desc":"Rabbit publish (header)","data":{"header":{},"correlationId":"","messageId":"","routing":["OnBoardingFleetEvent"]}},{"id":"-","desc":"Rabbit publish to exchange (payload)","data":{"activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","Taker":{"companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","subsidiaryId":"77db5b27-6d85-40e7-9ae6-936aefde727f","name":"Reinger - Parker-4433","taxId":46191559,"address":{"street":"Bradly Walk","postCode":"03101","city":"Lake Lacybury","countryCode":"DE"},"customerId":"faf252b9-ed0e-4ad4-9633-3baf54b17d86","JitpayCustomerId":"K4433","NameZusatz":"GmbH_de","Telephone":"+49 1743284130","UserDetail":{"userId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","firstName":"Alivia","lastName":"Yundt","email":"jitpaytest+ob9528@gmail.com"}},"GiverTakerMapping":{"TakerId":"K4433"}}}],"output":[]},{"id":"6cb9707a-058a-43a6-ab53-923aecc19ec5","type":"group","status":"failed","duration":12.25,"description":"10.2.5. Check Queues","group":"Check Queues","startTime":null,"steps":[{"id":"a945f7b6-e118-49ed-a568-048b4a779cf6","status":"succeed","errorMessage":"","duration":0.23,"startTime":"2022-10-28T12:29:06.603Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.1 Check Masterdata (User) -> Extern","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.md.user","timeout":10,"count_min":1,"count_max":null,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[{"header":{"fields":{"consumerTag":"amq.ctag-VzmXW2adENRjDFHVlpAVfA","deliveryTag":1,"redelivered":false,"exchange":"user","routingKey":""},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventId":"2a1d0655-2ce9-4f93-b31b-f556122db58a","eventType":"UPDATE","eventDate":"2022-10-28T12:29:05.722+0000"},"receivedTime":"2022-10-28T12:29:06.802Z"},"data":{"eventType":"UPDATE","eventDate":"2022-10-28T12:29:05.722705Z","eventId":"2a1d0655-2ce9-4f93-b31b-f556122db58a","id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","entityType":null,"phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","roles":["CarrierAdmin","CustomerAdmin"],"source":"Onboarding","priority":null,"locale":null,"carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"customerId":null,"passwordHint":null,"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z","driver":null}}]},{"id":"-","desc":"Rabbit consume (header)","data":{"fields":{"consumerTag":"amq.ctag-VzmXW2adENRjDFHVlpAVfA","deliveryTag":1,"redelivered":false,"exchange":"user","routingKey":""},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventId":"2a1d0655-2ce9-4f93-b31b-f556122db58a","eventType":"UPDATE","eventDate":"2022-10-28T12:29:05.722+0000"},"receivedTime":"2022-10-28T12:29:06.802Z"}},{"id":"-","desc":"Rabbit consume (data)","data":{"eventType":"UPDATE","eventDate":"2022-10-28T12:29:05.722705Z","eventId":"2a1d0655-2ce9-4f93-b31b-f556122db58a","id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","entityType":null,"phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","roles":["CarrierAdmin","CustomerAdmin"],"source":"Onboarding","priority":null,"locale":null,"carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"customerId":null,"passwordHint":null,"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z","driver":null}}]},{"id":"74b24e35-479e-4d75-809e-09badff69a57","status":"succeed","errorMessage":"","duration":0.24,"startTime":"2022-10-28T12:29:06.831Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.2 Check Masterdata (Company) -> External","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.md.company","timeout":10,"count_min":1,"count_max":null,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[{"header":{"fields":{"consumerTag":"amq.ctag-l52O9GJ_yAG7oYVc76ZHAw","deliveryTag":1,"redelivered":false,"exchange":"company","routingKey":""},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","eventType":"CREATE","eventDate":"2022-10-28T12:29:02.714+0000"},"receivedTime":"2022-10-28T12:29:07.044Z"},"data":{"eventType":"CREATE","eventDate":"2022-10-28T12:29:02.714835Z","eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","id":"c67161a6-d552-45ce-834e-53aa9053ae7f","latitude":null,"longitude":null,"phoneNumbers":[{"id":"50cc7340-c0e7-451c-8025-133ebb17ff3e","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"bankDetails":[],"customers":[],"carriers":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","currency":"","initialPin":"","preferredCardIssuer":"SHELL","maximumCards":100,"baseCashpoolValue":0,"baseCashpoolPercentage":50,"defaultDriverLimit":2000,"defaultVehicleLimit":2000,"addresses":[{"id":"047ab752-af67-15d8-a423-a4ff652e2ae2","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":"49","phoneNumber":"1743284130","type":"BILLING"}],"phoneNumbers":[{"id":"047ab752-b0a4-1bf8-8687-74b0550e7b42","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"users":[{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","source":"Onboarding","carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"roles":["CarrierAdmin","CustomerAdmin"],"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z"}],"carrierName":"Murray, Ullrich and Gorczany-9917","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","createDate":"2022-10-28T12:29:02.661704Z","modifiedDate":"2022-10-28T12:29:02.661704Z"}],"addresses":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":"49","phoneNumber":"1743284130","type":"BILLING"}],"companyName":"Murray, Ullrich and Gorczany-9917","documentStorageDirectoryName":"","jitPayId":"4433","vatId":null,"taxId":null,"legalForm":"GmbH_de","createDate":"2022-10-28T12:29:00.47Z","modifiedDate":"2022-10-28T12:29:02.668433Z"}}]},{"id":"-","desc":"Rabbit consume (header)","data":{"fields":{"consumerTag":"amq.ctag-l52O9GJ_yAG7oYVc76ZHAw","deliveryTag":1,"redelivered":false,"exchange":"company","routingKey":""},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","eventType":"CREATE","eventDate":"2022-10-28T12:29:02.714+0000"},"receivedTime":"2022-10-28T12:29:07.044Z"}},{"id":"-","desc":"Rabbit consume (data)","data":{"eventType":"CREATE","eventDate":"2022-10-28T12:29:02.714835Z","eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","id":"c67161a6-d552-45ce-834e-53aa9053ae7f","latitude":null,"longitude":null,"phoneNumbers":[{"id":"50cc7340-c0e7-451c-8025-133ebb17ff3e","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"bankDetails":[],"customers":[],"carriers":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","currency":"","initialPin":"","preferredCardIssuer":"SHELL","maximumCards":100,"baseCashpoolValue":0,"baseCashpoolPercentage":50,"defaultDriverLimit":2000,"defaultVehicleLimit":2000,"addresses":[{"id":"047ab752-af67-15d8-a423-a4ff652e2ae2","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":49,"phoneNumber":1743284130,"type":"BILLING"}],"phoneNumbers":[{"id":"047ab752-b0a4-1bf8-8687-74b0550e7b42","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"users":[{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","source":"Onboarding","carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"roles":["CarrierAdmin","CustomerAdmin"],"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z"}],"carrierName":"Murray, Ullrich and Gorczany-9917","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","createDate":"2022-10-28T12:29:02.661704Z","modifiedDate":"2022-10-28T12:29:02.661704Z"}],"addresses":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":49,"phoneNumber":1743284130,"type":"BILLING"}],"companyName":"Murray, Ullrich and Gorczany-9917","documentStorageDirectoryName":"","jitPayId":4433,"vatId":null,"taxId":null,"legalForm":"GmbH_de","createDate":"2022-10-28T12:29:00.47Z","modifiedDate":"2022-10-28T12:29:02.668433Z"}}]},{"id":"5968c829-70b7-4ea6-92d8-143635fe9236","status":"succeed","errorMessage":"","duration":0.23,"startTime":"2022-10-28T12:29:07.080Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.3 Check Onboarding -> Extern (Masterdata, Portal)","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.ob.company","timeout":20,"count_min":1,"count_max":null,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[{"header":{"correlationId":"","fields":{"consumerTag":"amq.ctag-98Oei5j11xVgmdZ23C9H-Q","deliveryTag":1,"redelivered":false,"exchange":"com.jitpay.company.onboarding","routingKey":"JitpayServicesSync.RoutingKey"},"properties":{"deliveryMode":1,"messageId":""},"headers":{},"receivedTime":"2022-10-28T12:29:07.272Z"},"data":{"companyDto":{"id":"c67161a6-d552-45ce-834e-53aa9053ae7f","name":"Murray, Ullrich and Gorczany-9917","state":"CREATED","referer":"LANDING_PAGE","target":"JITPAY","legalForm":"GmbH_de","vatId":null,"truckAmount":0,"taxId":"98173124"},"addressDto":{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","street":"Bradly Walk","zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","countryCode":"DE","timocomId":null},"contactDto":{"id":"50cc7340-c0e7-451c-8025-133ebb17ff3e","firstName":"Alivia","lastName":"Yundt","email":"jitpaytest+ob9528@gmail.com","telephoneNumber":{"country":"49","number":"1743284130"},"companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f"},"userDetail":{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","email":"jitpaytest+ob9528@gmail.com","languageCode":"en"}}}]},{"id":"-","desc":"Rabbit consume (header)","data":{"correlationId":"","fields":{"consumerTag":"amq.ctag-98Oei5j11xVgmdZ23C9H-Q","deliveryTag":1,"redelivered":false,"exchange":"com.jitpay.company.onboarding","routingKey":"JitpayServicesSync.RoutingKey"},"properties":{"deliveryMode":1,"messageId":""},"headers":{},"receivedTime":"2022-10-28T12:29:07.272Z"}},{"id":"-","desc":"Rabbit consume (data)","data":{"companyDto":{"id":"c67161a6-d552-45ce-834e-53aa9053ae7f","name":"Murray, Ullrich and Gorczany-9917","state":"CREATED","referer":"LANDING_PAGE","target":"JITPAY","legalForm":"GmbH_de","vatId":null,"truckAmount":0,"taxId":98173124},"addressDto":{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","street":"Bradly Walk","zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","countryCode":"DE","timocomId":null},"contactDto":{"id":"50cc7340-c0e7-451c-8025-133ebb17ff3e","firstName":"Alivia","lastName":"Yundt","email":"jitpaytest+ob9528@gmail.com","telephoneNumber":{"country":49,"number":1743284130},"companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f"},"userDetail":{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","email":"jitpaytest+ob9528@gmail.com","languageCode":"en"}}}]},{"id":"09a6b92c-5f04-4bbe-9c48-e5726aa03de6","status":"succeed","errorMessage":"","duration":0.24,"startTime":"2022-10-28T12:29:07.310Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.4 Check Portal -> Masterdata","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.md.fleet_event_bus","timeout":10,"count_min":1,"count_max":null,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[{"header":{"correlationId":"","fields":{"consumerTag":"amq.ctag-3OfAIogS1V6vuBxvbjygjg","deliveryTag":1,"redelivered":false,"exchange":"fleet_event_bus","routingKey":"OnBoardingFleetEvent"},"properties":{"deliveryMode":1,"messageId":""},"headers":{},"receivedTime":"2022-10-28T12:29:07.515Z"},"data":{"activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","Taker":{"companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","subsidiaryId":"77db5b27-6d85-40e7-9ae6-936aefde727f","name":"Reinger - Parker-4433","taxId":"46191559","address":{"street":"Bradly Walk","postCode":"03101","city":"Lake Lacybury","countryCode":"DE"},"customerId":"faf252b9-ed0e-4ad4-9633-3baf54b17d86","JitpayCustomerId":"K4433","NameZusatz":"GmbH_de","Telephone":"+49 1743284130","UserDetail":{"userId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","firstName":"Alivia","lastName":"Yundt","email":"jitpaytest+ob9528@gmail.com"}},"GiverTakerMapping":{"TakerId":"K4433"}}}]},{"id":"-","desc":"Rabbit consume (header)","data":{"correlationId":"","fields":{"consumerTag":"amq.ctag-3OfAIogS1V6vuBxvbjygjg","deliveryTag":1,"redelivered":false,"exchange":"fleet_event_bus","routingKey":"OnBoardingFleetEvent"},"properties":{"deliveryMode":1,"messageId":""},"headers":{},"receivedTime":"2022-10-28T12:29:07.515Z"}},{"id":"-","desc":"Rabbit consume (data)","data":{"activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","Taker":{"companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","subsidiaryId":"77db5b27-6d85-40e7-9ae6-936aefde727f","name":"Reinger - Parker-4433","taxId":46191559,"address":{"street":"Bradly Walk","postCode":"03101","city":"Lake Lacybury","countryCode":"DE"},"customerId":"faf252b9-ed0e-4ad4-9633-3baf54b17d86","JitpayCustomerId":"K4433","NameZusatz":"GmbH_de","Telephone":"+49 1743284130","UserDetail":{"userId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","firstName":"Alivia","lastName":"Yundt","email":"jitpaytest+ob9528@gmail.com"}},"GiverTakerMapping":{"TakerId":"K4433"}}}]},{"id":"76b1deef-eb1e-4773-831a-b95ed0424ad2","status":"succeed","errorMessage":"","duration":0.24,"startTime":"2022-10-28T12:29:07.549Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.5 Check Masterdata (Carrier) -> External","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.md.carrier","timeout":10,"count_min":1,"count_max":null,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[{"header":{"fields":{"consumerTag":"amq.ctag-gLenOXZxXnpdDVxzosDnww","deliveryTag":1,"redelivered":false,"exchange":"carrier","routingKey":""},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventId":"1851fbbe-1454-4012-a873-73315dd08b05","eventType":"CREATE","eventDate":"2022-10-28T12:29:03.215+0000"},"receivedTime":"2022-10-28T12:29:07.765Z"},"data":{"eventType":"CREATE","eventDate":"2022-10-28T12:29:03.215103Z","eventId":"1851fbbe-1454-4012-a873-73315dd08b05","id":"77db5b27-6d85-40e7-9ae6-936aefde727f","currency":"","initialPin":"","preferredCardIssuer":"SHELL","maximumCards":100,"baseCashpoolValue":0,"baseCashpoolPercentage":50,"defaultDriverLimit":2000,"defaultVehicleLimit":2000,"latitude":null,"longitude":null,"addresses":[{"id":"047ab752-af67-15d8-a423-a4ff652e2ae2","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":"49","phoneNumber":"1743284130","type":"BILLING"}],"phoneNumbers":[{"id":"047ab752-b0a4-1bf8-8687-74b0550e7b42","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"users":[{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","source":"Onboarding","carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"roles":["CarrierAdmin","CustomerAdmin"],"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z"}],"carrierName":"Murray, Ullrich and Gorczany-9917","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","createDate":"2022-10-28T12:29:02.661704Z","modifiedDate":"2022-10-28T12:29:02.661704Z"}}]},{"id":"-","desc":"Rabbit consume (header)","data":{"fields":{"consumerTag":"amq.ctag-gLenOXZxXnpdDVxzosDnww","deliveryTag":1,"redelivered":false,"exchange":"carrier","routingKey":""},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventId":"1851fbbe-1454-4012-a873-73315dd08b05","eventType":"CREATE","eventDate":"2022-10-28T12:29:03.215+0000"},"receivedTime":"2022-10-28T12:29:07.765Z"}},{"id":"-","desc":"Rabbit consume (data)","data":{"eventType":"CREATE","eventDate":"2022-10-28T12:29:03.215103Z","eventId":"1851fbbe-1454-4012-a873-73315dd08b05","id":"77db5b27-6d85-40e7-9ae6-936aefde727f","currency":"","initialPin":"","preferredCardIssuer":"SHELL","maximumCards":100,"baseCashpoolValue":0,"baseCashpoolPercentage":50,"defaultDriverLimit":2000,"defaultVehicleLimit":2000,"latitude":null,"longitude":null,"addresses":[{"id":"047ab752-af67-15d8-a423-a4ff652e2ae2","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":49,"phoneNumber":1743284130,"type":"BILLING"}],"phoneNumbers":[{"id":"047ab752-b0a4-1bf8-8687-74b0550e7b42","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"users":[{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","source":"Onboarding","carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"roles":["CarrierAdmin","CustomerAdmin"],"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z"}],"carrierName":"Murray, Ullrich and Gorczany-9917","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","createDate":"2022-10-28T12:29:02.661704Z","modifiedDate":"2022-10-28T12:29:02.661704Z"}}]},{"id":"6bd27f5f-018f-4467-8029-c681e759e7a8","status":"succeed","errorMessage":"","duration":0.23,"startTime":"2022-10-28T12:29:07.795Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.6 Check Extern -> Identity/Keycloak","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.md.identity","timeout":10,"count_min":1,"count_max":null,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[{"header":{"correlationId":"","fields":{"consumerTag":"amq.ctag-ZG5ZhLflgLhud5KrWRW0KQ","deliveryTag":1,"redelivered":false,"exchange":"Identity.Exchange","routingKey":"Identity.UserSync"},"properties":{"deliveryMode":1,"messageId":""},"headers":{},"receivedTime":"2022-10-28T12:29:07.995Z"},"data":{"CorrelationId":null,"CompanyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","username":"jitpaytest+ob9528@gmail.com","email":"jitpaytest+ob9528@gmail.com","password":"Germany2022!","CompanyName":"Murray, Ullrich and Gorczany-9917","PhoneNumber":"491743284130","Locale":"de","FirstName":"Alivia","LastName":"Yundt","EntityType":null,"Roles":"","UserId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","CustomerId":null,"activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","SubsidiaryId":"77db5b27-6d85-40e7-9ae6-936aefde727f","LegitimationStatus":1,"PasswordHint":"Germany2022!","DriverId":null}}]},{"id":"-","desc":"Rabbit consume (header)","data":{"correlationId":"","fields":{"consumerTag":"amq.ctag-ZG5ZhLflgLhud5KrWRW0KQ","deliveryTag":1,"redelivered":false,"exchange":"Identity.Exchange","routingKey":"Identity.UserSync"},"properties":{"deliveryMode":1,"messageId":""},"headers":{},"receivedTime":"2022-10-28T12:29:07.995Z"}},{"id":"-","desc":"Rabbit consume (data)","data":{"CorrelationId":null,"CompanyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","username":"jitpaytest+ob9528@gmail.com","email":"jitpaytest+ob9528@gmail.com","password":"Germany2022!","CompanyName":"Murray, Ullrich and Gorczany-9917","PhoneNumber":491743284130,"Locale":"de","FirstName":"Alivia","LastName":"Yundt","EntityType":null,"Roles":"","UserId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","CustomerId":null,"activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","SubsidiaryId":"77db5b27-6d85-40e7-9ae6-936aefde727f","LegitimationStatus":1,"PasswordHint":"Germany2022!","DriverId":null}}]},{"id":"339ed1da-2630-4895-b06b-fda6ab80fcb2","status":"failed","errorMessage":"Error: maximum 0 message(s) expected, but 1 message(s) received","duration":0.46,"startTime":"2022-10-28T12:29:08.022Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.7 Check Masterdata -> Fleet Error queue","detailDescription":["All fleet death letter exchanges are bound to this queue","No error should occur while consuming the Master Data creation/update events.","Therefore the queue must be empty"],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.fleet.masterdata.error","timeout":5,"count_min":0,"count_max":0,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[{"header":{"fields":{"consumerTag":"amq.ctag-ZoSzQ7gSy0HenIO2Nk13fQ","deliveryTag":1,"redelivered":false,"exchange":"fleet.masterdata.error.exchange","routingKey":"fleet.masterdata.company.error"},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventDate":"2022-10-28T12:29:02.714+0000","eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","eventType":"CREATE","x-death":[{"count":1,"reason":"rejected","queue":"fleet.masterdata.company","time":{"!":"timestamp","value":1666960142},"exchange":"company","routing-keys":[""]}],"x-first-death-exchange":"company","x-first-death-queue":"fleet.masterdata.company","x-first-death-reason":"rejected"},"receivedTime":"2022-10-28T12:29:08.235Z"},"data":{"eventType":"CREATE","eventDate":"2022-10-28T12:29:02.714835Z","eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","id":"c67161a6-d552-45ce-834e-53aa9053ae7f","latitude":null,"longitude":null,"phoneNumbers":[{"id":"50cc7340-c0e7-451c-8025-133ebb17ff3e","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"bankDetails":[],"customers":[],"carriers":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","currency":"","initialPin":"","preferredCardIssuer":"SHELL","maximumCards":100,"baseCashpoolValue":0,"baseCashpoolPercentage":50,"defaultDriverLimit":2000,"defaultVehicleLimit":2000,"addresses":[{"id":"047ab752-af67-15d8-a423-a4ff652e2ae2","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":"49","phoneNumber":"1743284130","type":"BILLING"}],"phoneNumbers":[{"id":"047ab752-b0a4-1bf8-8687-74b0550e7b42","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"users":[{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":"1743284130","countryPrefix":"49","category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","source":"Onboarding","carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"roles":["CarrierAdmin","CustomerAdmin"],"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z"}],"carrierName":"Murray, Ullrich and Gorczany-9917","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","createDate":"2022-10-28T12:29:02.661704Z","modifiedDate":"2022-10-28T12:29:02.661704Z"}],"addresses":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":"49","phoneNumber":"1743284130","type":"BILLING"}],"companyName":"Murray, Ullrich and Gorczany-9917","documentStorageDirectoryName":"","jitPayId":"4433","vatId":null,"taxId":null,"legalForm":"GmbH_de","createDate":"2022-10-28T12:29:00.47Z","modifiedDate":"2022-10-28T12:29:02.668433Z"}}]},{"id":"-","desc":"Rabbit consume (header)","data":{"fields":{"consumerTag":"amq.ctag-ZoSzQ7gSy0HenIO2Nk13fQ","deliveryTag":1,"redelivered":false,"exchange":"fleet.masterdata.error.exchange","routingKey":"fleet.masterdata.company.error"},"properties":{"contentType":"application/octet-stream","deliveryMode":2,"priority":0},"headers":{"eventDate":"2022-10-28T12:29:02.714+0000","eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","eventType":"CREATE","x-death":[{"count":1,"reason":"rejected","queue":"fleet.masterdata.company","time":{"!":"timestamp","value":1666960142},"exchange":"company","routing-keys":[""]}],"x-first-death-exchange":"company","x-first-death-queue":"fleet.masterdata.company","x-first-death-reason":"rejected"},"receivedTime":"2022-10-28T12:29:08.235Z"}},{"id":"-","desc":"Rabbit consume (data)","data":{"eventType":"CREATE","eventDate":"2022-10-28T12:29:02.714835Z","eventId":"6f1ff797-ce94-4e05-80aa-c38e0707e998","id":"c67161a6-d552-45ce-834e-53aa9053ae7f","latitude":null,"longitude":null,"phoneNumbers":[{"id":"50cc7340-c0e7-451c-8025-133ebb17ff3e","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"bankDetails":[],"customers":[],"carriers":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","currency":"","initialPin":"","preferredCardIssuer":"SHELL","maximumCards":100,"baseCashpoolValue":0,"baseCashpoolPercentage":50,"defaultDriverLimit":2000,"defaultVehicleLimit":2000,"addresses":[{"id":"047ab752-af67-15d8-a423-a4ff652e2ae2","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":49,"phoneNumber":1743284130,"type":"BILLING"}],"phoneNumbers":[{"id":"047ab752-b0a4-1bf8-8687-74b0550e7b42","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"users":[{"id":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","email":"jitpaytest+ob9528@gmail.com","phoneNumbers":[{"id":"047ab752-fcae-162a-b0e6-64f0cb3e4ca6","description":"Defined during Onboarding","number":1743284130,"countryPrefix":49,"category":"OFFICE","phoneType":"UNKNOWN","favorite":false}],"username":"jitpaytest+ob9528@gmail.com","lastname":"Yundt","firstname":"Alivia","activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","legitimationStatus":"LegimitationStarted","source":"Onboarding","carrierIds":["77db5b27-6d85-40e7-9ae6-936aefde727f"],"roles":["CarrierAdmin","CustomerAdmin"],"createDate":"2022-10-28T12:29:00.49Z","modifiedDate":"2022-10-28T12:29:00.49Z"}],"carrierName":"Murray, Ullrich and Gorczany-9917","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","createDate":"2022-10-28T12:29:02.661704Z","modifiedDate":"2022-10-28T12:29:02.661704Z"}],"addresses":[{"id":"77db5b27-6d85-40e7-9ae6-936aefde727f","street":"Bradly Walk","houseNumber":null,"zipCode":"${generatet::fake:address:zipCode}","city":"Lake Lacybury","country":"DE","timocomId":null,"firstname":"Alivia","lastname":"Yundt","email":"jitpaytest+ob9528@gmail.com","countryPrefix":49,"phoneNumber":1743284130,"type":"BILLING"}],"companyName":"Murray, Ullrich and Gorczany-9917","documentStorageDirectoryName":"","jitPayId":4433,"vatId":null,"taxId":null,"legalForm":"GmbH_de","createDate":"2022-10-28T12:29:00.47Z","modifiedDate":"2022-10-28T12:29:02.668433Z"}}]},{"id":"fd3c4e25-3aac-49ce-b30a-8b6f1b4acaee","status":"succeed","errorMessage":"","duration":5.19,"startTime":"2022-10-28T12:29:08.483Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.8 Check Portal -> MasterData Error queue","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.portal.masterdata.error","timeout":5,"count_min":0,"count_max":0,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[]}]},{"id":"04f43464-4532-481f-be0a-caa37e4994a1","status":"succeed","errorMessage":"","duration":5.19,"startTime":"2022-10-28T12:29:13.677Z","type":"rabbitConsume","group":"Check Queues","description":"10.2.5.9 Check Onboarding -> Masterdata Error queue","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Rabbit consume (configuration)","data":{"queue":"test.onboarding.masterdata.error","timeout":5,"count_min":0,"count_max":0,"username":"jitpay","hostname":"192.168.50.250","port":5672,"vhost":"/"}}],"output":[{"id":"-","desc":"Rabbit consume (received messages)","data":[]}]}],"errorMessage":null,"detailDescription":null,"input":null,"output":null},{"id":"681b0f02-ea37-4538-80db-5df990b594fc","type":"group","status":"failed","duration":1.9899999999999998,"description":"10.2.6. check IDs","group":"check IDs","startTime":null,"steps":[{"id":"80e13232-16fb-4bb8-8544-8d08d93abe38","status":"succeed","errorMessage":"","duration":0.29,"startTime":"2022-10-28T12:29:18.865Z","type":"restAuthorize","group":"check IDs","description":"10.2.6.1 Get claims of user","detailDescription":["jitpaytest+ob9528@gmail.com"],"steps":null,"input":[{"id":"-","desc":"Rest authorize (config)","data":{"url":"/token","grantType":"password","retryCount":2,"retryPause":5,"clientId":"jitpay_portal_angular_application_client","clientSecret":"","scope":"openid app_api jitpay.role email roles profile","username":"jitpaytest+ob9528@gmail.com","password":"Germany2022!"}}],"output":[{"id":"-","desc":"Rest authorize (header)","data":{"retries":1,"duration":0.28,"url":"https://keycloak.dev.jitpay.eu/auth/realms/jitpay/protocol/openid-connect/token","option":{"method":"POST","body":{"grant_type":"password","client_id":"jitpay_portal_angular_application_client","response_type":"code id_token token","scope":"openid app_api jitpay.role email roles profile","username":"jitpaytest+ob9528@gmail.com","password":"Germany2022!"},"headers":{"Content-Type":"application/x-www-form-urlencoded"},"mode":"no-cors","referrerPolicy":"unsafe-url"}}},{"id":"-","desc":"Rest authorize (curl)","data":"curl -i -X POST 'https://keycloak.dev.jitpay.eu/auth/realms/jitpay/protocol/openid-connect/token' \\\n\t-H 'Content-Type: application/x-www-form-urlencoded' \\\n\t--data-binary '{\n\t\t  \"grant_type\": \"password\",\n\t\t  \"client_id\": \"jitpay_portal_angular_application_client\",\n\t\t  \"response_type\": \"code id_token token\",\n\t\t  \"scope\": \"openid app_api jitpay.role email roles profile\",\n\t\t  \"username\": \"jitpaytest+ob9528@gmail.com\",\n\t\t  \"password\": \"Germany2022!\"\n\t\t}'"},{"id":"-","desc":"Rest authorize (token)","data":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ2X0FjVnoyaU4tSnZ1eldsZVh1a0RTekpjbVBybE5DLUVYS01ybzBmNktFIn0.eyJleHAiOjE2NjY5NjM3NTksImlhdCI6MTY2Njk2MDE1OSwianRpIjoiYWZmM2RjMjItOWFlOS00OGIwLWI0N2UtMjMyZTkyYzBhYTA1IiwiaXNzIjoiaHR0cHM6Ly9rZXljbG9hay5kZXYuaml0cGF5LmV1L2F1dGgvcmVhbG1zL2ppdHBheSIsImF1ZCI6WyJmbGVldF9hcGkiLCJwb3J0YWxfYXBpIiwic25hX2FwaSIsImFwcF9hcGkiLCJrZ3NfYXBpIiwiY2hlY2tJZGVudGl0eVNjb3BlIiwidGNhX2FwaSIsImppdHBheWFwaSIsImFjY291bnQiXSwic3ViIjoiZWE1YTI0ZjEtODZmNy00NDU3LWExZmMtYzVhOTRmNDQ0ODgzIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiaml0cGF5X3BvcnRhbF9hbmd1bGFyX2FwcGxpY2F0aW9uX2NsaWVudCIsInNlc3Npb25fc3RhdGUiOiI3YmExNDRlZC1hNDU4LTQwZmQtYTZkYS1jNzUzYzk1NTcyODMiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtaml0cGF5Il19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJ0Y2FfYXBpIG1hcHBpbmctYXR0cmlidXRlLXNjb3BlIGVtYWlsIHBvcnRhbF9hcGkgcHJvZmlsZSBrZ3NfYXBpIGZsZWV0X2FwaXNjb3BlIGppdHBheS5yb2xlIHNuYV9hcGkgYXBwX2FwaSBvcGVuaWQgY2hlY2tJZGVudGl0eVNjb3BlIiwic2lkIjoiN2JhMTQ0ZWQtYTQ1OC00MGZkLWE2ZGEtYzc1M2M5NTU3MjgzIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInJvbGUiOlsib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtaml0cGF5Il0sInBhc3N3b3JkSGludCI6Ikdlcm1hbnkyMDIyISIsImVudGl0eVR5cGUiOiIiLCJyb2xlSWQiOiIwIiwiY29tcGFueU5hbWUiOiJNdXJyYXksIFVsbHJpY2ggYW5kIEdvcmN6YW55LTk5MTciLCJsZWdpdGltYXRpb25TdGF0dXMiOiJPbkJvYXJkaW5nTm90U3RhcnRlZCIsInByZWZlcnJlZF91c2VybmFtZSI6ImppdHBheXRlc3Qrb2I5NTI4QGdtYWlsLmNvbSIsImxvY2FsZSI6ImRlIiwicHJpb3JpdHkiOiIwIiwiZ2l2ZW5fbmFtZSI6IkFsaXZpYSIsInVzZXJJZCI6ImRiYWM0NDI1LWNhNzktNGMxZi05OGY5LTZmNDkzZGY0NmFkMiIsImNvbXBhbnlJZCI6ImM2NzE2MWE2LWQ1NTItNDVjZS04MzRlLTUzYWE5MDUzYWU3ZiIsImRyaXZlcklkIjoiIiwibmFtZSI6IkFsaXZpYSBZdW5kdCIsImN1c3RvbWVySWQiOiIiLCJzdWJzaWRpYXJ5SWQiOiI3N2RiNWIyNy02ZDg1LTQwZTctOWFlNi05MzZhZWZkZTcyN2YiLCJmaXJzdFRpbWVMb2dnZWRJbiI6InRydWUiLCJhY3RpdmF0aW9uQ29kZSI6ImM2NzE2MWE2LWQ1NTItNDVjZS04MzRlLTUzYWE5MDUzYWU3ZiIsImZhbWlseV9uYW1lIjoiWXVuZHQiLCJlbWFpbCI6ImppdHBheXRlc3Qrb2I5NTI4QGdtYWlsLmNvbSIsInVzZXJuYW1lIjoiaml0cGF5dGVzdCtvYjk1MjhAZ21haWwuY29tIn0.EdPGEIiTAo87eGR7UEfU4vXuaKPYbseFKSg0Dh_2iGGnLc-FF5EZuuWUWoDrhuyQhT8DjZPqZ9slVW_eKRMorVIWw7GtfA2N4ofz64nhKhycVlFdX_UBtvPd6fSQqpX1Gxr_rc79RAcnxZPoUHIskmuMj4EZu2_bwqOE8sRSvhcyYcIHyHYEPnbsCksQVJqiLqfxBMlpvMxkf27zme0YNJeepxa-Dsxutem17vo28izIEZfVwC4sglnhw8hu49kI4dJqrVMn5WxOlTyPhNRcpkUNupDF-8TICv5M0pe-yuWX2bej3vfAbd4tcrPfRTQ87XIrjx_3CYwlcfpTVb5ePg"},{"id":"-","desc":"Rest authorize (data - token)","data":{"exp":1666963759,"iat":1666960159,"jti":"aff3dc22-9ae9-48b0-b47e-232e92c0aa05","iss":"https://keycloak.dev.jitpay.eu/auth/realms/jitpay","aud":["fleet_api","portal_api","sna_api","app_api","kgs_api","checkIdentityScope","tca_api","jitpayapi","account"],"sub":"ea5a24f1-86f7-4457-a1fc-c5a94f444883","typ":"Bearer","azp":"jitpay_portal_angular_application_client","session_state":"7ba144ed-a458-40fd-a6da-c753c9557283","realm_access":{"roles":["offline_access","uma_authorization","default-roles-jitpay"]},"resource_access":{"account":{"roles":["manage-account","manage-account-links","view-profile"]}},"scope":"tca_api mapping-attribute-scope email portal_api profile kgs_api fleet_apiscope jitpay.role sna_api app_api openid checkIdentityScope","sid":"7ba144ed-a458-40fd-a6da-c753c9557283","email_verified":true,"role":["offline_access","uma_authorization","default-roles-jitpay"],"passwordHint":"Germany2022!","entityType":"","roleId":0,"companyName":"Murray, Ullrich and Gorczany-9917","legitimationStatus":"OnBoardingNotStarted","preferred_username":"jitpaytest+ob9528@gmail.com","locale":"de","priority":0,"given_name":"Alivia","userId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","driverId":"","name":"Alivia Yundt","customerId":"","subsidiaryId":"77db5b27-6d85-40e7-9ae6-936aefde727f","firstTimeLoggedIn":true,"activationCode":"c67161a6-d552-45ce-834e-53aa9053ae7f","family_name":"Yundt","email":"jitpaytest+ob9528@gmail.com","username":"jitpaytest+ob9528@gmail.com"}}]},{"id":"79c36d5d-d55e-41d9-bdc5-328cc355803b","status":"succeed","errorMessage":"","duration":0.01,"startTime":"2022-10-28T12:29:19.154Z","type":"data handling","group":"check IDs","description":"10.2.6.2 Exptected IDs","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"Data Handling (input)","data":{"email":"jitpaytest+ob9528@gmail.com","companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","companyName":"Murray, Ullrich and Gorczany-9917","carrierId":"77db5b27-6d85-40e7-9ae6-936aefde727f","userId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2"}}],"output":[]},{"id":"49320f5a-155a-4ac6-8b25-596afc3fcdd6","status":"succeed","errorMessage":"","duration":0.45,"startTime":"2022-10-28T12:29:19.163Z","type":"mssqlQuery","group":"check IDs","description":"10.2.6.3 Check Masterdata Database","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"SQL Query (query)","data":"SELECT\ntrim(md_u.username) AS email\n, md_c.id AS carrierId\n, md_c.carrier_name AS carrierName\n, md_c.deleted AS carrierDeleted\n, md_co.id AS companyId\n, md_co.company_name AS companyName\n, md_co.deleted AS companyDeleted\n, md_u.id  AS userId\nFROM useraccount md_u\nLEFT OUTER JOIN useraccount_carriers md_u_c\nON md_u.id = md_u_c.user_id\nLEFT OUTER JOIN carrier md_c\nON md_u_c.carriers_id = md_c.id\nLEFT OUTER JOIN company md_co\nON md_c.company_id = md_co.id\nWHERE md_u.EMAIL = 'jitpaytest+ob9528@gmail.com'"}],"output":[{"id":"-","desc":"SQL Query result (header)","data":{"hostname":"192.168.50.194","database":"masterdata","type":"mssql","duration":0.44,"rows":1}},{"id":"-","desc":"SQL Query result (paylaod)","data":{"email":"jitpaytest+ob9528@gmail.com","carrierId":"77db5b27-6d85-40e7-9ae6-936aefde727f","carrierName":"Murray, Ullrich and Gorczany-9917","carrierDeleted":false,"companyId":"c67161a6-d552-45ce-834e-53aa9053ae7f","companyName":"Murray, Ullrich and Gorczany-9917","companyDeleted":false,"userId":"dbac4425-ca79-4c1f-98f9-6f493df46ad2"}}]},{"id":"f0bbe589-297c-48cf-a3b2-6f078201110b","status":"failed","errorMessage":"Error: error: expected:header#rows\n\texpected: 1\n\tactual: 0","duration":0.59,"startTime":"2022-10-28T12:29:19.612Z","type":"mssqlQuery","group":"check IDs","description":"10.2.6.4 Check Fleet Database","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"SQL Query (query)","data":"SELECT\nTRIM(u.EMAIL) AS email\n, co.JITPAY_ID AS jitpayId\n, co.Name AS companyName\n, LOWER(CAST(ca.id AS VARCHAR(38))) AS carrierId\n, LOWER(CAST(co.id AS VARCHAR(38))) AS companyId\n, LOWER(CAST(u.id AS VARCHAR(38))) AS userId\nFROM Fleet_User u\nLEFT OUTER JOIN Company co\nON u.Company_id = co.id\nLEFT OUTER JOIN Driver d\nON u.id = d.user_id\nLEFT OUTER JOIN Subsidiary ca\nON co.id = ca.company_id\nWhere u.EMAIL = 'jitpaytest+ob9528@gmail.com'"}],"output":[{"id":"-","desc":"SQL Query result (header)","data":{"hostname":"192.168.50.194","database":"Jitfleet","type":"mssql","duration":0.28,"rows":0}},{"id":"-","desc":"SQL Query result (paylaod)","data":[]}]},{"id":"e431676d-be19-49a8-a493-a8506df14bc5","status":"succeed","errorMessage":"","duration":0.65,"startTime":"2022-10-28T12:29:20.202Z","type":"mssqlQuery","group":"check IDs","description":"10.2.6.5 Check Fuel Database","detailDescription":[],"steps":null,"input":[{"id":"-","desc":"SQL Query (query)","data":"SELECT\nca.external_id AS carrierId\n, ca.deleted AS isDeleted\n, ca.carrier_name AS carrierName\nFROM carrier ca\nWhere ca.external_id = '77db5b27-6d85-40e7-9ae6-936aefde727f'"}],"output":[{"id":"-","desc":"SQL Query result (header)","data":{"hostname":"192.168.50.194","database":"JitCash","type":"mssql","duration":0.65,"rows":1}},{"id":"-","desc":"SQL Query result (paylaod)","data":{"carrierId":"77db5b27-6d85-40e7-9ae6-936aefde727f","isDeleted":false,"carrierName":"Murray, Ullrich and Gorczany-9917"}}]}],"errorMessage":null,"detailDescription":null,"input":null,"output":null}]}},"projectName":"gauge","environment":"development","durationMin":"0.47","startTime":"2022-10-28T12:28:52.451Z"};
        </script>
    </body>
</html>
